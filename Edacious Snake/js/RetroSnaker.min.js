var Game=(()=>{"use strict";function l(){a.clearRect(0,0,g,h),a.fillStyle="white",a.font=2*h/15+"px Lucida Console",a.fillText("You are Dead!",g/6,h/2,2*g/3),a.font=1*h/25+"px Lucida Console",a.fillStyle="#ccc",a.fillText("History High Score:"+j,6.5*g/20,5*h/8,2*g/5),a.fillText('Press "Enter" to Restart',3*g/10,11*h/15,2*g/5)}function m(b,c,d,e){a.beginPath(),a.arc(b+.5*d,c+.5*d,.5*d,0,2*Math.PI),a.fillStyle=e,a.fill()}function n(e,f,i,j,l){var m=document.getElementById(e),j=j||"red",l=l||"blue";g=f||500,h=i||500,a=m.getContext("2d"),d=Math.floor(h/20),b=Math.floor(g/d),c=Math.floor(h/d),m.width=b*d,m.height=c*d,w.color=j,v.color=l,v.score=0,document.removeEventListener("keyup",r),document.addEventListener("keyup",t),k&&u(),w.init(),v.init()}function o(){k=!1,document.removeEventListener("keyup",t),clearTimeout(e),clearTimeout(f),a.clearRect(0,0,g,h),l(),document.addEventListener("keyup",r)}function p(a){if("number"==typeof a[0]){var b=a[0]*d,c=a[1]*d;m(b,c,d,v.color)}else"object"==typeof a[0]?a.forEach((a=>{var b=a[0]*d,c=a[1]*d;m(b,c,d,w.color)})):console.error("You enter a wrong arr!")}function q(a){var b=Math.floor(Math.random()*a);return b}function r(a){13==a.keyCode&&n("canvas",g,h,w.color,v.color)}function s(){var b="Score:"+v.score;a.fillStyle="#ccc",a.font="20px Lucida Console",a.fillText(b,d,d)}function t(b){b.preventDefault();var c=b.keyCode||b.which,d=37==c||38==c||39==c||40==c;d&&(f&&(clearTimeout(e),clearTimeout(f)),2==Math.abs(i-c)&&(c=i),f=setTimeout(function b(){var d=v.pos,f=w.pos;e=setTimeout(b,100),a.clearRect(0,0,g,h),p(d),p(w.move(c)),v.collideCheck(d,f),w.collideCheck(f[f.length-1],f),s()},50))}function u(){a.clearRect(0,0,g,h),a.fillStyle="white",a.font=2*h/15+"px Lucida Console",a.fillText("Edacious Snake",g/6,h/2,2*g/3),a.font=1*h/25+"px Lucida Console",a.fillText('Press "↑ ↓ ← →" to Start',3*g/10,11*h/15,2*g/5)}var a,b,c,d,e,f,g,h,i,j=window.localStorage.highScore||0,k=!0,v={pos:[],score:0,init:function(){var a=this.pos;a[0]=q(b),a[1]=q(c),console.log("Init Food Successed!")},collideCheck:function(a,b){var c=b[b.length-1];c[0]==a[0]&&c[1]==a[1]&&(this.score+=1,j=j>this.score?j:this.score,window.localStorage.highScore=j,v.init(),b.unshift(a))}},w={pos:[],initLength:4,init:function(){var a=[],d=this.initLength;a[0]=[],a[0][0]=q(b-1.2*d),a[0][1]=q(c-1.2*d);for(var e=a.length;e<d;e++)a[e]=[],a[e][0]=a[e-1][0]+1,a[e][1]=a[e-1][1];i=39,this.pos=a,console.log("Init Snake success!")},move:function(a){var d,e,b=this.pos,c=b[b.length-1];switch(a){case 37:d=c[0]-1,b.push([d,c[1]]);break;case 38:e=c[1]-1,b.push([c[0],e]);break;case 39:d=c[0]+1,b.push([d,c[1]]);break;case 40:e=c[1]+1,b.push([c[0],e])}return i=a,b.shift(),b},collideCheck:function(a,d){var e=a[0]<0||a[0]>=b||a[1]<0||a[1]>=c;if(e)return void o();for(let f of d)if(d.indexOf(f)!=d.length-1&&f[0]==a[0]&&f[1]==a[1])return void o()}};return{init:n}})();